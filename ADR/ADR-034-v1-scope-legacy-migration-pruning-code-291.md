# ADR-034: Удаление out-of-scope legacy-обработки из миграции GameState

- Статус: accepted
- Дата: 2026-02-25
- Связанные задачи: [CODE]-[291]

## Контекст

В `GameState` миграция `v1 -> v2` содержала специальную очистку legacy-полей из cut-list (`sessionScore`, `achievements`, `dailyQuests`, `tutorial*`, `pendingHelpRequest.requestedAt`).

Эти поля не входят в v1 контракт и не используются runtime-моделью. Их явная обработка оставляла в коде дополнительную реализацию для функционала вне scope PRD v1.

## Решение

1. Упростить миграцию `v1 -> v2` до нормализации `schemaVersion=2` без специальной очистки cut-list полей.
2. Использовать strict runtime-конструкторы `createGameState/createLevelSession/createHelpWindow` как allowlist-границу: в итоговую модель попадают только поля v1 схемы.
3. Синхронизировать документацию (`README.md`, `docs/data/game-state-schema.md`) с новым контрактом миграции.

## Последствия

- Из кодовой базы удалена явная реализация поддержки out-of-scope структур.
- Поведение миграции остаётся детерминированным и совместимым с текущими тестами.
- Актуальная state-модель сохраняет только поля, входящие в v1 scope.

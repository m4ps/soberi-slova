# ADR-005: Слоистые модульные границы для INIT-002

- Статус: accepted
- Дата: 2026-02-24
- Связанные задачи: [INIT]-[002]

## Контекст

Нужно внедрить архитектурный каркас из TECHSPEC с явным правилом зависимостей
`UI/Input/Render/Platform -> Application -> CoreState/Domain`, при этом проект остаётся на раннем bootstrap-этапе без полной бизнес-реализации.

## Решение

1. Разделить код на слои `src/domain`, `src/application`, `src/adapters`, оставив `src/main.ts` как composition root.
2. Создать публичные интерфейсы (barrel `index.ts`) для модулей `CoreState`, `InputPath`, `WordValidation`, `LevelGenerator`, `HelpEconomy`, `RenderMotion`, `PlatformYandex`, `Persistence`, `Telemetry`.
3. Зафиксировать контракт границ автоматическим тестом `tests/architecture-boundaries.test.ts`, который валидирует import-граф относительно допустимых направлений зависимостей.

## Последствия

- Архитектурные слои и модульные границы закреплены до реализации business-логики INIT-003+.
- Любое новое нарушение зависимости между слоями будет детектироваться тестами до merge.
- Адаптеры платформы/персистентности/телеметрии пока реализованы как безопасные заглушки, что позволяет расширять их итеративно без ломки контракта слоёв.
